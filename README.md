# 旭川ライブカメラ記録
旭川市のライブカメラ画像を記録して過去分を見られるようにしたい動画にして見たい
- 過去分参照機能
- 動画化機能

※このリポジトリではnodeの部分だけ扱う
## 使う技術
- cron
- curl
- ffmpeg
- node.js

フロントの技術は未定
## できること(詳細機能)
### 定期実行(cron)
- 10minごと(cron)に旭川ライブカメラの画像をCurlでDL
  - 日付ファイル名で保存
- 24hごと ffmpegで日付フォルダ内のImgsで動画作成
  - H.264
### 都度実行(node.js)
- どっかのURLにリクエスト(StartTime - EndTime 含でPost?) → Start - End 間の動画作成してレスポンス 
  - 作った動画は一定期間保存して見られるようにする
  - 一定期間経過後 OR 30個ぐらい溜まったら捨てる 古い順で
- 動画一覧ページ
## ページ構成
```
ROOT/ALC/   ---   トップページ 以下のポータル
            ---   日付ごとの動画一覧ページ
            ---   日付ごとの生画像フォルダ一覧
            ---   生画像一覧(日付ごと)(上記ページから遷移)
            ---   任意の範囲を動画化するページ
```
## フォルダ構成
```
どっかのフォルダ/ALCSrc/
                 +-- 2019-11-12/
                 |           +-- Imgs/
                 |           |     +-- YYYY-MM-DD-hh-mm.jpg
                 |           |     +-- YYYY-MM-DD-hh-mm.jpg
                 |           |     +-- YYYY-MM-DD-hh-mm.jpg
                 |           +-- Videos/
                 |                 +-- YYYY-MM-DD.mp4
                 +-- 2019-11-13/
                 |           +-- Imgs/ ...
                 |           +-- Videos/ ...
                 +-- YYYY-MM-DD/ ...
                 +-- CreatedVideos/
                           +-- Start-End.mp4
```
## 開発にあたっての疑問点
- RPi(Raspbian)にnode.jsインストールするときのベストプラクティス
  - .
- ffmpegのLinux版
  - .
- 画像への日付の付け方のベストプラクティスは?
 - .